FROM awsteiner/o2scl:v0.929a1_u23.04_py

ARG DEBIAN_FRONTEND=noninteractive
ARG USERNAME=utk
ARG UID=1000

LABEL Andrew W. Steiner (awsteiner@mykolab.com)

# UTK EOS
WORKDIR /opt
RUN apt-get install libyaml-cpp-dev -y 
RUN pip --no-cache-dir install -r pandas pyyaml openapi-core \
    muses_porter @ git+https://gitlab.com/nsf-muses/common.git@porter-v0.1.0#subdirectory=Porter --no-compile
RUN git clone https://github.com/awsteiner/eos && \
    cd eos && \
    git switch v2 && \
    make -j4 eos_nuclei && \
    curl https://isospin.roam.utk.edu/public_data/eos_tables/du21/fid_3_5_22.o2 --output data/fid_3_5_22.o2
WORKDIR eos
